(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=o[l]||0,u="".concat(l," ").concat(d);o[l]=d+1;var h=t(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)n[h].references++,n[h].updater(p);else{var m=i(p,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:m,references:1})}a.push(u)}return a}function i(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=t(o[a]);n[s].references--}for(var c=r(e,i),l=0;l<o.length;l++){var d=t(o[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=c}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},208:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),i=t.n(r),o=t(314),a=t.n(o)()(i());a.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap);"]),a.push([e.id,':root {\n  --board-dimension: 10;\n  --cell-width: 50px;\n  --cell-border: 1px solid white;\n  --ship-color: grey;\n  --miss-color: white;\n  --hit-color: red;\n}\n\nhtml,\nbody {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  background: rgb(7, 3, 75);\n  background: linear-gradient(\n    180deg,\n    rgba(7, 3, 75, 1) 0%,\n    rgba(9, 9, 121, 1) 58%,\n    rgba(5, 42, 185, 1) 100%\n  );\n  font-family: "Black Ops One";\n}\n\n.container {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n\nh1 {\n  text-align: center;\n  font-size: 3rem;\n  color: rgb(125, 136, 160);\n  text-shadow: 0px 0px 10px rgba(0,0,0,0.6);\n}\n\nh2 {\n  text-align: center;\n  color: white;\n}\n\n.game-container {\n  display: flex;\n  gap: 50px;\n  margin-top: 10px;\n}\n\n.game-grid {\n  display: grid;\n\n  grid-template: repeat(var(--board-dimension), var(--cell-width)) / repeat(\n      var(--board-dimension),\n      var(--cell-width)\n    );\n}\n\n.grid-cell {\n  border: var(--cell-border);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.peg {\n  width: 40%;\n  height: 40%;\n  border-radius: 50%;\n  border: none;\n}\n\n.hit {\n  background-color: var(--hit-color);\n}\n\n.missed {\n  background-color: var(--miss-color);\n}\n\n.ship {\n  background-color: var(--ship-color);\n}\n\n.ship-container {\n  display: flex;\n  gap: 30px;\n  width: calc(var(--cell-width) * var(--board-dimension));\n  height: calc(var(--cell-width) * var(--board-dimension));\n}\n\n.unplaced-ship {\n  display: flex;\n  z-index: 1;\n  width: fit-content;\n  height: fit-content;\n}\n\n.horizontal {\n  flex-direction: row;\n}\n\n.vertical {\n  flex-direction: column;\n}\n\n\n.clone {\n  position: absolute;\n  pointer-events: none;\n  opacity: 0.8;\n}\n\n.centered {\n  justify-content: center;\n  align-items: center;\n}\n\n.unplaced-ship-cell {\n  width: var(--cell-width);\n  height: var(--cell-width);\n  background-color: var(--ship-color);\n  border: var(--cell-border);\n}\n\n#start-game-button {\n  padding: 30px 30px;\n  color: white;\n  border: 2px solid white;\n  border-radius: 10px;\n  background: none;\n  font-family: inherit;\n  width: fit-content;\n  font-size: 3rem;\n}\n\n#start-game-button:hover {\n  font-size: 2.8rem;\n  color: cyan;\n  border-color: cyan;\n  cursor: pointer;\n}\n\n#overlay-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0,0,0,0.3);\n  backdrop-filter: blur(5px);\n  z-index: 2;\n}\n\n.overlay {\n  width: 380px;\n  height: 230px;\n  background-color: rgb(16, 63, 165);\n  border-radius: 20px;\n  border: 4px solid rgb(0, 119, 255);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\nh3 {\n  font-size: 2rem;\n  text-align: center;\n  color: white;\n}\n\n#new-game-button {\n  background: none;\n  border: 2px solid white;\n  border-radius: 20px;\n  padding: 20px 40px;\n  color: white;\n  font-family: inherit;\n  font-size: 2rem;\n}\n\n#new-game-button:hover {\n  font-size: 1.8rem;\n  cursor: pointer;\n  border-color: cyan;\n  color: cyan;\n}',""]);const s=a},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),n.push(d))}},n}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={id:r,exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),i=t.n(r),o=t(825),a=t.n(o),s=t(659),c=t.n(s),l=t(56),d=t.n(l),u=t(540),h=t.n(u),p=t(113),m=t.n(p),f=t(208),y={};y.styleTagTransform=m(),y.setAttributes=d(),y.insert=c().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=h(),i()(f.A,y),f.A&&f.A.locals&&f.A.locals;const g=Object.freeze({MISSED:-3,HIT:-2,EMPTY:-1});class v{constructor(e=10){this.ships=[],this.dimension=e,this.board=Array.from({length:e},(()=>Array.from({length:e},(()=>g.EMPTY))))}static ithShipCoords(e,n,t,r){return e.isHorizontal?[n,t+r]:[n+r,t]}inBounds(e,n){return n>=0&&n<this.dimension&&e>=0&&e<this.dimension}shipInBounds(e,n,t){const[r,i]=v.ithShipCoords(e,n,t,e.length-1);return this.inBounds(n,t)&&this.inBounds(r,i)}wouldOverlap(e,n,t){for(let r=0;r<e.length;r++){const[i,o]=v.ithShipCoords(e,n,t,r);if(this.board[i][o]!==g.EMPTY)return!0}return!1}placeShip(e,n,t){if(!this.shipInBounds(e,n,t)||this.wouldOverlap(e,n,t))return!1;const r=this.ships.length;for(let i=0;i<e.length;i++){const[o,a]=v.ithShipCoords(e,n,t,i);this.board[o][a]=r}return e.y0=n,e.x0=t,this.ships.push(e),!0}receiveAttack(e,n){if(this.inBounds(e,n)&&this.board[e][n]!==g.HIT&&this.board[e][n]!==g.MISSED){if(this.board[e][n]===g.EMPTY)return this.board[e][n]=g.MISSED,{attackStatus:"missed",y:e,x:n,sank:null};{const t=this.board[e][n];return this.ships[t].hit(),this.board[e][n]=g.HIT,{attackStatus:"hit",y:e,x:n,sank:this.ships[t].sunk?this.ships[t]:null}}}return null}allSunk(){return this.ships.every((e=>e.sunk))}}class b{static lengthMapping={carrier:5,battleship:4,destroyer:3,submarine:3,patrol_boat:2};constructor(e,n=!0){if(this.type=e,this.length=b.lengthMapping[e],!this.length)throw new Error("Invalid ship type");this.isHorizontal=n,this.numHits=0,this.y0=-1,this.x0=-1,this.sunk=!1}hit(){this.numHits++,this.numHits>=this.length&&(this.sunk=!0)}}class x{constructor(e){this.gameboard=new v,this.unplacedShips=[new b("carrier"),new b("battleship"),new b("destroyer"),new b("submarine"),new b("patrol_boat")],this.name=e,this.lastAttack={}}placeShip(e,n,t){const r=this.unplacedShips.findIndex((n=>n.type===e));if(-1===r)return null;const i=this.unplacedShips[r];return this.gameboard.placeShip(i,n,t)?(this.unplacedShips.splice(r,1),i):null}placeShipsRandom(){for(;this.unplacedShips.length>0;){const e=this.unplacedShips[0];let n,t;e.isHorizontal=!!Math.floor(2*Math.random());do{n=Math.floor(this.gameboard.dimension*Math.random()),t=Math.floor(this.gameboard.dimension*Math.random())}while(!this.gameboard.placeShip(e,n,t));this.unplacedShips.shift()}}rotateShips(){this.unplacedShips.forEach((e=>e.isHorizontal=!e.isHorizontal))}receiveAttack(e,n){const t=this.gameboard.receiveAttack(e,n);return t&&(this.lastAttack=t),t}receiveAttackRandom(){let e,n,t=null;for(;!t;)e=Math.floor(this.gameboard.dimension*Math.random()),n=Math.floor(this.gameboard.dimension*Math.random()),t=this.gameboard.receiveAttack(e,n);return this.lastAttack=t,t}}class S{constructor(e="PLAYER1",n="COMPUTER"){this.player1=new x(e),this.player2=new x(n),this.started=!1,this.player1Turn=!0,this.victor=null}init(){return 0===this.player1.unplacedShips.length&&0===this.player2.unplacedShips.length&&(this.started=!0),this.started}playTurn(e){if(!this.started||this.victor)return null;let n=this.player1Turn?e(this.player2):e(this.player1);return n&&(this.player1Turn=!this.player1Turn,n.sank&&this.updateVictor()),n}playManualTurn(e,n){return this.playTurn((t=>t.receiveAttack(e,n)))}playRandomTurn(){return this.playTurn((e=>e.receiveAttackRandom()))}updateVictor(){this.player1.gameboard.allSunk()?this.victor=this.player2.name:this.player2.gameboard.allSunk()?this.victor=this.player1.name:this.victor=null}}let w,k;function E(e,n,t){return e.querySelector(`#${e.id}-cell-${n*e.dataset.dimension+t}`)}function C(e){const n=e.id.split("-"),t=Number(n[n.length-1]),r=e.closest(".game-grid");return[Math.floor(t/r.dataset.dimension),t%r.dataset.dimension]}function T(e,n){const t=document.createElement("div");t.classList.add("game-grid"),t.dataset.dimension=e,t.id=n;for(let r=0;r<e*e;r++){const e=document.createElement("div");e.classList.add("grid-cell"),e.id=`${n}-cell-${r}`,t.appendChild(e)}return t}function M(e){const n=document.createElement("div");return n.className=`peg ${e}`,n}function A(e,n){for(let t=0;t<n.length;t++){const[r,i]=v.ithShipCoords(n,n.y0,n.x0,t);E(e,r,i).classList="grid-cell ship"}k.started||0!==k.player1.unplacedShips.length||function(){const e=document.createElement("button");e.id="start-game-button",e.textContent="START GAME";const n=document.querySelector(".ship-container");n.classList.add("centered"),e.addEventListener("click",R),n.appendChild(e)}()}function L(e,n){const t=E(e,n.y,n.x);console.log(t);const r=t.querySelector(".peg");switch(r&&r.remove(),n.attackStatus){case"hit":t.appendChild(M("hit")),n.sank&&A(e,n.sank);break;case"missed":t.appendChild(M("missed"))}}function q(e){w||(w=e.currentTarget.cloneNode(!0),w.classList.add("clone"),e.currentTarget.style.visibility="hidden",document.documentElement.appendChild(w),z(e))}function z(e){w&&(w.style.left=e.clientX-w.firstElementChild.offsetWidth/2+"px",w.style.top=e.clientY-w.firstElementChild.offsetHeight/2+"px")}function I(e){if(!w)return;const n=w.id;document.documentElement.removeChild(w),w=null;const t=e.target.closest(".grid-cell");if(t){const[e,r]=C(t),i=k.player1.placeShip(n,e,r);if(i)return A(document.querySelector("#player-grid"),i),void document.querySelector("#"+n).remove()}document.querySelector("#"+n).style.visibility="visible"}function H(e){"r"!==e.key&&"R"!==e.key||function(){const e=document.querySelector(".ship-container");let n="ship-container horizontal",t="unplaced-ship vertical";"horizontal"===e.classList[1]&&(n="ship-container vertical",t="unplaced-ship horizontal"),e.className=n,document.querySelectorAll(".unplaced-ship").forEach((e=>e.className=t)),k.player1.rotateShips()}()}function N(e){const n=e.target.closest(".grid-cell");if(!n)return;const[t,r]=C(n);let i=k.playManualTurn(t,r);if(console.log(i),i){const e=document.querySelector("#player-grid");L(document.querySelector("#opponent-grid"),k.player2.lastAttack),i=k.playRandomTurn(),i&&L(e,k.player1.lastAttack)}k.victor&&function(e){const n=document.querySelector("#overlay-container");n.style.display="flex",n.querySelector("h3").textContent=`${e} WINS!`}(k.victor)}function O(){const e=document.querySelector(".game-container");e.innerHTML="";const n=document.createElement("div");n.className="left-side";const t=document.createElement("h2");t.textContent=k.player1.name,n.appendChild(t);const r=document.createElement("div");r.className="right-side";const i=document.createElement("h2");i.textContent="PLACE YOUR SHIPS (R TO ROTATE)",r.appendChild(i),e.appendChild(n),e.appendChild(r);const o=k.player1.unplacedShips.map((e=>function(e){const n=document.createElement("div");n.className="unplaced-ship horizontal",n.id=e.type;for(let t=0;t<e.length;t++){const e=document.createElement("div");e.className="unplaced-ship-cell",n.appendChild(e)}return n}(e))),a=document.createElement("div");a.className="ship-container vertical",o.forEach((e=>{e.addEventListener("mousedown",q)})),document.addEventListener("mousemove",z),document.addEventListener("mouseup",I),document.addEventListener("keydown",H),o.forEach((e=>a.appendChild(e)));const s=T(10,"player-grid");n.appendChild(s),r.appendChild(a)}function R(){if(k.player2.placeShipsRandom(),!k.init())return;document.querySelector(".ship-container").remove();const e=T(10,"opponent-grid");document.querySelector(".right-side").appendChild(e),document.querySelector(".right-side").querySelector("h2").textContent=k.player2.name,document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",I),e.addEventListener("click",N)}k=new S,w=null,O(),document.querySelector("#new-game-button").addEventListener("click",(function(){k=new S,document.querySelector("#overlay-container").style.display="none",O()}))})();